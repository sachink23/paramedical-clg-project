function onAdmLoad(){
    //$("#info_admission").modal("show");
    $('#info_admission').modal({backdrop: 'static', keyboard: false})
  }
  if(window.addEventListener) {
      window.addEventListener('load',onAdmLoad,false); //W3C
  } else {
      window.attachEvent('onload',onAdmLoad);   //IE
  }
class educationalDetails {
    SSCCheck = document.querySelector("#addSSCCheckBox");
    HSCCheck = document.querySelector("#addHSCCheckBox");
    GraduationCheck = document.querySelector("#addGraduationCheckBox");
    OtherCheck = document.querySelector("#addOtherCourseCheckBox");
    EduQual = $("#eduQual");
    eduQualSelected() {
        switch(this.EduQual.val()) {
            case "7": {
                this.openSSC(0);
                this.openHSC(0);
                this.openGRAD(0);
                this.openOTHER(1);
                break;
            }
            case "SSC": {
                this.openSSC(1);
                this.openHSC(0);
                this.openGRAD(0);
                this.openOTHER(0);
                break;
            }
            case "HSC": {
                this.openSSC(1);
                this.openHSC(1);
                this.openGRAD(0);
                this.openOTHER(0);
                break;
            }
            case "GRADUATE": {
                this.openSSC(1);
                this.openHSC(1);
                this.openGRAD(1);
                this.openOTHER(0);
                break;
            }
            case "OTHER": {
                this.openOTHER(1);
                break;
            }
            default : {
                this.openSSC(0);
                this.openHSC(0);
                this.openGRAD(0);
                this.openOTHER(0);
                break;
            }
        }
    }
    openSSC(val = 1) {
        this.SSCCheck.checked = val;
        if(val == 1) {
            $("#sscDetailsForm").css({"display":""});
            
        } else if(val == 0) {
            $("#sscDetailsForm").css({"display":"none"});
        }
    }
    openHSC(val = 1) {
        this.HSCCheck.checked = val;
        if(val == 1) {
            $("#hscDetailsForm").css({"display":""});
        } else if(val == 0) {
            $("#hscDetailsForm").css({"display":"none"});
        }
    }
    openGRAD(val = 1) {
        this.GraduationCheck.checked = val;
        if(val == 1) {
            $("#graduateDetailsForm").css({"display":""});
        } else if(val == 0) {
            $("#graduateDetailsForm").css({"display":"none"});
        }
    }
    openOTHER(val = 1) {
        this.OtherCheck.checked = val;
        if(val == 1) {
            $("#otherDetailsForm").css({"display":""});
        } else if(val == 0) {
            $("#otherDetailsForm").css({"display":"none"});
        }
    }
    
}
var edu = new educationalDetails;
var addSSCCheckBox = document.querySelector("#addSSCCheckBox");
var addHSCCheckBox = document.querySelector("#addHSCCheckBox");
var addGraduationCheckBox = document.querySelector("#addGraduationCheckBox");
var addOtherCourseCheckBox = document.querySelector("#addOtherCourseCheckBox");
var selectEduQual = document.querySelector("#eduQual");
selectEduQual.addEventListener( 'change', function() {   
    edu.eduQualSelected();
});
addSSCCheckBox.addEventListener( 'change', function() {
    if(this.checked) {
        edu.openSSC();
        
    } else {
        edu.openSSC(0);
    } 
});
addHSCCheckBox.addEventListener( 'change', function() {
    if(this.checked) {
        edu.openHSC();
        if(addSSCCheckBox.checked == false) {
            swal.fire({
                title: "Please Fill SSC Details",
                text: "If you have HSC details then you must feel SSC details.",
                type: "warning"
            });
            addSSCCheckBox.checked = true;
                edu.openSSC();
        }
    } else {
        edu.openHSC(0);
    }
});
addGraduationCheckBox.addEventListener( 'change', function() {
    if(this.checked) {
        edu.openGRAD();
        var i = 0;
        if(addSSCCheckBox.checked == false) {
            addSSCCheckBox.checked = true;
            edu.openSSC();
            i++;
        }
        if(addHSCCheckBox.checked == false) {
            addHSCCheckBox.checked = true;
            edu.openHSC()
            i++;
        }
        if(i != 0)
            swal.fire({
                title: "Please Fill SSC & HSC Details",
                text: "If you have graduation details then you must feel SSC & HSC details.",
                type: "warning"
            });
    } else {
        edu.openGRAD(0);
    }
});
addOtherCourseCheckBox.addEventListener( 'change', function() {
    if(this.checked) {
        edu.openOTHER();
    } else {
        edu.openOTHER(0);
    }
});
class validateForm {
    data = new FormData();
    SSCCheck = document.querySelector("#addSSCCheckBox");
    HSCCheck = document.querySelector("#addHSCCheckBox");
    GraduationCheck = document.querySelector("#addGraduationCheckBox");
    OtherCheck = document.querySelector("#addOtherCourseCheckBox");

    valid() {
        try {
            this.data = new FormData();
            if(!this.admissionDetails()) {
                this.data = new FormData();
                return false;
            }
            if(!this.personalDetails()) {
                this.data = new FormData();
                return false;
            }
            if(!this.eduDetails()) {
                this.data = new FormData();
                return false;
            }
            if(!this.decl()) {
                this.data = new FormData();
                return false;
            }
            this.data.append("mob1", $("#mob1").val());
            this.data.append("mob2", $("#mob2").val());
            this.data.append("localAdd", $("#localAdd").val());
            this.data.append("perAdd", $("#perAdd").val());
            this.data.append("email", $("#email").val());
            this.data.append("iAgree", document.getElementById("iAgree").checked);
            this.data.append("dob", $("#DOB").val());
            return true;
        } catch {
            this.data = new FormData();
            return false;
        }        
    }
    decl() {
        if(document.getElementById("iAgree").checked) {
            return true
        } else {
            swal.fire({
                title: "Please Agree The Declarations",
                type: "error"
            })
            return false;
        }
    }
    eduDetails() {
        try {
            var eduQual = $("#eduQual").val();
            if(!(eduQual =="7" || eduQual =="SSC" || eduQual =="HSC" || eduQual =="GRADUATE" || eduQual =="OTHER")) {
                swal.fire({
                    title: "Please Select Educational Qualification",
                    type: "error"

                });   
                return false;
            } else {
                this.data.append("eduQual", eduQual);
            }
            if(eduQual == "7") {
                if(this.SSCCheck.checked == true) {
                    swal.fire({
                        title: "Please fill only Other Course Details",
                        type: "error"
                    })
                    return false;
                }
                if(this.HSCCheck.checked == true) {
                    swal.fire({
                        title: "Please fill only Other Course Details",
                        type: "error"
                    })
                    return false;
                }
                if(this.GraduationCheck.checked == true) {
                    swal.fire({
                        title: "Please fill only Other Course Details",
                        type: "error"
                    })
                    return false;
                }
                if(this.OtherCheck.checked == false) {
                    swal.fire({
                        title: "Please fill Other Course Details",
                        type: "error"
                    })
                    return false;
                } else {
                    if(!this.is_eduValid("OTHER")) {
                        return false;
                    }
                }
                                
            } else if(eduQual == "SSC") {
                if(this.SSCCheck.checked == false) {
                    swal.fire({
                        title: "Please fill SSC Details",
                        type: "error"
                    })
                    return false;
                } else {
                    if(!this.is_eduValid("SSC"))
                        return false;
                }
                if(this.HSCCheck.checked == true) {
                    swal.fire({
                        title: "Please fill only SSC Details",
                        type: "error"
                    })
                    return false;
                }
                if(this.GraduationCheck.checked == true) {
                    swal.fire({
                        title: "Please fill only SSC Details",
                        type: "error"
                    })
                    return false;
                }
                if(this.OtherCheck.checked == true) {
                   if(!this.is_eduValid("OTHER"))
                        return false;
                }

            } else if(eduQual == "HSC") {
                if(this.SSCCheck.checked == false) {
                    swal.fire({
                        title: "Please Fill SSC Details",
                        type: "error"
                    })
                    return false;
                } else {
                    if(!this.is_eduValid("SSC"))
                        return false;
                }
                if(this.HSCCheck.checked == false) {
                    swal.fire({
                        title: "Please Fill HSC Details",
                        type: "error"
                    })
                    return false;
                } else {
                    if(!this.is_eduValid("HSC"))
                        return false;
                }
                if(this.GraduationCheck.checked == true) {
                    swal.fire({
                        title: "Please fill only SSC & HSC Details",
                        type: "error"
                    })
                    return false;
                }
                if(this.OtherCheck.checked == true) {
                    if(!this.is_eduValid("OTHER"))
                        return false;
                }

            } else if(eduQual == "GRADUATE") {
                if(this.SSCCheck.checked == false) {
                    swal.fire({
                        title: "Please Fill SSC Details",
                        type: "error"
                    })
                    return false;
                } else {
                    if(!this.is_eduValid("SSC"))
                        return false;
                }
                if(this.HSCCheck.checked == false) {
                    swal.fire({
                        title: "Please Fill HSC Details",
                        type: "error"
                    })
                    return false;
                } else {
                    if(!this.is_eduValid("HSC"))
                        return false;
                }
                if(this.GraduationCheck.checked == false) {
                    swal.fire({
                        title: "Please Fill Graduation Details",
                        type: "error"
                    })
                    return false;
                } else {
                    if(!this.is_eduValid("GRADUATE"))
                        return false;
                }
                if(this.OtherCheck.checked == true) {
                    if(!this.is_eduValid("OTHER"))
                        return false;
                }

            } else if(eduQual == "OTHER") {
                if(this.SSCCheck.checked == true) {
                    if(!this.is_eduValid("SSC"))
                        return false;
                }
                if(this.HSCCheck.checked == true) {
                    if(!this.is_eduValid("HSC"))
                    return false;
                }
                if(this.GraduationCheck.checked == true) {
                    if(!this.is_eduValid("GRADUATE"))
                        return false;
                }
                if(this.OtherCheck.checked == false) {
                    swal.fire({
                        title: "Please Select Other Course Details",
                        type: "error"
                    })
                    return false;
                } else {
                    if(!this.is_eduValid("OTHER"))
                        return false;
                }
            } else {
                return false;
            }
            return true;
        } catch {
            return false;
        }
    }
    is_eduValid(qual) {
        var isPass = document.getElementById("isPassed_"+qual).value;
        var month = $("#passingMonth_"+qual).val();
        var per = $("#passingPer_"+qual).val();
        var col = $("#col_"+qual).val();
        var div = $("#div_"+qual).val();
        var board = $("#board_"+qual).val();
        /*    SSCCheck 
    HSCCheck    GraduationCheck OtherCheck; */
        if(qual == "OTHER") {
            if($("#otherCourseName").val().length < 1) { 
                swal.fire( {
                    title: "Please Enter Name of Other Course",
                    type: "error"
                })
                return false;  
            }
            this.data.append("otherCourseName", $("#otherCourseName").val())
        }
        if(isPass == "") {
            console.log(isPass)
            swal.fire( {
                title: "Please Select Passing Status For "+qual+ " Qualification",
                type: "error"
            })
            return false;
        } else {
            this.data.append("isPass_"+qual, isPass);
        }
        if(month == "") {
            swal.fire( {
                title: "Please Select Passing Month For "+qual+ " Qualification",
                type: "error"
            })
            return false;
        } else {
            this.data.append("month_"+qual, month);
        }

        if(!(/[+-]?([0-9]*[.])?[0-9]+/.test(per))) {
            swal.fire( {
                title: "Please Enter Valid Percentage For "+qual+ " Qualification",
                type: "error"
            })
            return false;
        } else {
            this.data.append("per_"+qual, per);
        }
        if(col.length < 3) { 
            swal.fire( {
                title: "Please Valid College/School Name For "+qual+" Qualification",
                type: "error"
            })
            return false;  
        } else {
            this.data.append("col_"+qual, col);
        }
        if(div.length < 3) { 
            swal.fire( {
                title: "Please Valid Class/Division For "+qual+" Qualification",
                type: "error",
                text: "For ex : Distinction, First Class, Second Class, Pass Class, Fail"
            })
            return false;  
        } else {
            this.data.append("div_"+qual, div);
        }
        if(board.length < 3) { 
            swal.fire( {
                title: "Please Valid University/Board Name For "+qual+" Qualification",
                type: "error"
            })
            return false;  
        } else {
            this.data.append("board_"+qual, board);
        }
        return true;    
    }
    personalDetails() {
        try {
            if(!($("#gender").val() =="male" || $("#gender").val() =="female" || $("#gender").val() =="other")) {
                swal.fire({
                    title: "Please Select Gender",
                    type: "error"

                })
                return false;
            } else {
                this.data.append("gender", $("#gender").val());
            }
            var regex = /[a-zA-Z\s]+/;
            if(!regex.test($("#fullname").val())) {
                swal.fire({
                    title: "Please Enter Valid Candidates Name",
                    type: "error",
                    text: "Name should only include alphabets"

                })
                return false;
            } else {
                this.data.append("fullname", $("#fullname").val());
            }
            if(!regex.test($("#fathersname").val())) {
                swal.fire({
                    title: "Please Enter Valid Father's Name",
                    type: "error",
                    text: "Name should only include alphabets"

                })
                return false;
            } else {
                this.data.append("fathersname", $("#fathersname").val());
            }
            if(!regex.test($("#fathersoccup").val())) {
                swal.fire({
                    title: "Please Enter Valid Father's Occupation",
                    type: "error",
                    text: "Occupation should only include alphabets"

                })
                return false;
            } else {
                this.data.append("fathersoccup", $("#fathersoccup").val());
            }
            if(!regex.test($("#mothersname").val())) {
                swal.fire({
                    title: "Please Enter Valid Mother's Name",
                    type: "error",
                    text: "Name should only include alphabets"

                })
                return false;
            } else {
                this.data.append("mothersname", $("#mothersname").val());
            }
            if(!regex.test($("#mothersoccup").val())) {
                swal.fire({
                    title: "Please Enter Valid Mother's Name",
                    type: "error",
                    text: "Occupation should only include alphabets"

                })
                return false;
            } else {
                this.data.append("mothersoccup", $("#mothersoccup").val());
            }
            try {
                if(document.getElementById("photo").files[0].size/1024/1024 > 1.5)  {
                    swal.fire({
                        title: "Please Select Valid Photograph",
                        type: "error",
                        text: "Photograph should have size less than 1.5 MB"
                    });
                    return false;
                }
                if(!(document.getElementById("photo").files[0].type=="image/jpeg" || document.getElementById("photo").files[0].type=="image/jpg" || document.getElementById("photo").files[0].type=="image/png"))  {
                    swal.fire({
                        title: "Please Select Valid Photograph",
                        type: "error",
                        text: "Photograph should be in .jpg, .jpeg or .png format"
                    });
                    return false;
                }
                this.data.append("photo", document.getElementById("photo").files[0]);
                return true;
            } catch {
                console.log("Photograph Selection Exception");
                swal.fire({
                    title: "Please Select Valid Photograph",
                    type: "error",
                    text: "Photograph should be in .jpg, .jpeg or .png format with size less than 1.5 MB"
                });
                return false;
            }
        
        } catch {
            console.log("exception catched in v.personalDetails()");
            return false;
        }
        
    }
    comDetail() {
        try {

            if($("#localAdd").val().length < 6) {
                swal.fire({
                    title: "Please Enter Valid Local Address",
                    type: "error"

                })
                return false;
            }  else {
                this.data.append("localAdd", $("#localAdd").val());
            }
            return true;
        } catch {
            return false;
        }
    }
    admissionDetails() {
        try {
            if($("#instituteDetails").val().length < 6) {
                swal.fire({
                    title: "Please Enter Valid Institute Details",
                    type: "error"

                })
                return false;
            } else {
                this.data.append("instituteDetails", $("#instituteDetails").val());
            }   
            if(($("#selectCourse").val() == "")) {
                console.log(1)
                swal.fire({
                    title: "Please Select Course",
                    type: "error"
                })
                return false;
            } else {
                this.data.append("selectCourse", $("#selectCourse").val());
            }   
            return true;
        } catch {
            console.log("exception catched in v.admissionDetails()");
            return false;
        }
    }
}
var v = new validateForm;
function submitAdmissionForm() {
    http = new xhr;
    if(v.valid() == true) {
        this.http.post("/api/admission/new/", v.data, console.log);
        
        return true;
    }
    else {
        return false;
    }
}